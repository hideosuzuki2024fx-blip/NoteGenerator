{
  "id": "github-commit-manual",
  "title": "SHA / Base64 Stability Protocol (Ponta Rule)",
  "source_path": "NoteMD/articles/20260105_github-commit-manual-en-fixed.md",
  "updated_at": "2026-01-08",
  "source_markdown": "## SHA / Base64 Stability Protocol (Ponta Rule)\n\nThis protocol defines a stable and verifiable method for committing files to GitHub without encoding corruption, mismatched SHAs, or Base64-related API errors.\n\n---\n\n### 1. Always retrieve the latest SHA before committing\n- Use GET /repos/{owner}/{repo}/contents/{path} to obtain the current SHA.\n- Execute the commit only after fetching the latest reference.\n\n### 2. Encode content with UTF-8 (without BOM) and Base64\n- Do not include any BOM marker.\n- Avoid line breaks, padding artifacts, or irregular characters.\n- Output must be strict RFC 4648-compliant Base64, one line only.\n\n### 3. Never modify file between SHA fetch and commit\n- Doing so will result in mismatched SHA errors.\n- Re-fetch SHA if there was any intermediate change.\n\n### 4. Verify Base64 before commit\n- Validate that the encoded string decodes back to the original source exactly.\n- Use multiple Base64 decoders to ensure reliability.\n\n### 5. Special Characters Exception\n- Four-byte characters like emoji are allowed only if explicitly part of system persona specs.\n- Otherwise, restrict to ASCII-compatible characters.\n\n### 6. Logging and Debug Mode\n- Maintain logs of encoded content and SHAs used for each commit.\n- Enable detailed logging in debug and test phases.\n\n### 7. Protocol Update Control\n- If GitHub API changes behavior, this protocol must be reviewed and updated.\n- All persona and commit tools must reference the same updated rule.\n\n---\n\n#### Status Table\n| Feature | Status | Detail |\n| --- | --- | --- |\n| GET sha | Working | Confirmed GET success with current SHA |\n| Base64 encode | UTF-8 (no BOM), one line | Enforced and validated |\n| sha at commit | Live SHA re-fetch required | Avoid stale SHA errors |\n| commit success | Under testing | Awaiting confirmation |"
}
