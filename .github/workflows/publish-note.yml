name: Publish Note

on:
  workflow_dispatch:
    inputs:
      article_path:
        description: 'Path to the article file'
        required: true
        default: 'NoteMD/articles/sample.md'
      publish_mode:
        description: 'Publish mode (default/public)'
        required: false
        default: 'default'

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: Echo inputs
        run: echo "ðŸ“„ article_path: ${{ github.event.inputs.article_path }}, mode: ${{ github.event.inputs.publish_mode }}"

      - name: Call NoteGen API
        run: |
          curl -X POST https://notegen-gpts-api.vercel.app/api/github-commit \
            -H "Content-Type: application/json" \
            -d '{
              "article_path": "${{ github.event.inputs.article_path }}",
              "publish_mode": "${{ github.event.inputs.publish_mode }}"
            }'
