name: NoteGenerator Relay
on:
  workflow_dispatch:
    inputs:
      message:
        description: "Trigger message from Ponta or GPT workflow"
        required: false
        default: "Manual relay trigger"
  push:
    paths:
      - "articles/**"
      - "docs/**"
      - "knowledge/**"
jobs:
  commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup environment
        run: echo "Setting up environment for NoteGenerator"

  create_sync_map_seed:
    needs: commit
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Create minimal sync_map.yml
        run: |
          mkdir -p .github/workflows
          echo "name: Sync Directory Map and README" > .github/workflows/sync_map.yml
          echo "on:">> .github/workflows/sync_map.yml
          echo "  workflow_dispatch:" >> .github/workflows/sync_map.yml
          git config --global user.name "PONTA Bot"
          git config --global user.email "ponta-bot@notegen.system"
          git add .github/workflows/sync_map.yml
          git commit -m 'auto-create: minimal sync_map.yml seed'
          git push origin main